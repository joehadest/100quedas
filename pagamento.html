<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Pagamento | 100 Quedas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body class="bg-light">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow-sm">
                    <div class="card-body p-4">
                        <h2 class="text-center mb-4">Finalizar Pagamento</h2>

                        <!-- Resumo do Pedido -->
                        <div class="alert alert-info mb-4">
                            <h5 class="alert-heading">Pacote Selecionado: <span id="pacoteNome">Básico</span></h5>
                            <p class="mb-0">Valor: R$ <span id="pacoteValor">699</span></p>
                        </div>

                        <!-- Opções de Pagamento -->
                        <div class="mb-4">
                            <h5 class="mb-3">Escolha a forma de pagamento:</h5>

                            <div class="d-flex gap-3 mb-4">
                                <button class="btn btn-outline-primary w-50" onclick="mostrarFormaPagamento('cartao')">
                                    <i class="bi bi-credit-card me-2"></i>Cartão de Crédito
                                </button>
                                <button class="btn btn-outline-primary w-50" onclick="mostrarFormaPagamento('pix')">
                                    <i class="bi bi-qr-code me-2"></i>PIX
                                </button>
                            </div>

                            <!-- Formulário Cartão de Crédito -->
                            <div id="formCartao" class="payment-form">
                                <form class="needs-validation" novalidate>
                                    <div class="mb-3">
                                        <label class="form-label">Número do Cartão</label>
                                        <input type="text" class="form-control" required pattern="[0-9]{16}">
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col">
                                            <label class="form-label">Validade</label>
                                            <input type="text" class="form-control" placeholder="MM/AA" required>
                                        </div>
                                        <div class="col">
                                            <label class="form-label">CVV</label>
                                            <input type="text" class="form-control" required pattern="[0-9]{3,4}">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Nome no Cartão</label>
                                        <input type="text" class="form-control" required>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">Pagar Agora</button>
                                </form>
                            </div>

                            <!-- Área PIX -->
                            <div id="formPix" class="payment-form" style="display: none;">
                                <div class="text-center">
                                    <div id="qr-pix-container">
                                        <div id="qr-code"></div>
                                        <p class="mt-3">Escaneie o QR Code para pagar</p>
                                    </div>
                                    <div class="input-group mb-3">
                                        <input type="text" id="pixCopyPaste" class="form-control" readonly>
                                        <button class="btn btn-outline-primary" onclick="copyPixCode()">Copiar
                                            Código</button>
                                    </div>
                                    <div class="alert alert-warning">
                                        <i class="bi bi-info-circle-fill me-2"></i>
                                        O pagamento será confirmado automaticamente
                                    </div>
                                    <div id="statusPagamento" class="alert alert-info d-none">
                                        Aguardando pagamento...
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <a href="index.html" class="text-decoration-none">
                                <i class="bi bi-arrow-left me-2"></i>Voltar para o site
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <script src="pix.js"></script>
    <script>
        // Função para mostrar/esconder formas de pagamento
        function mostrarFormaPagamento(forma) {
            document.getElementById('formCartao').style.display = forma === 'cartao' ? 'block' : 'none';
            document.getElementById('formPix').style.display = forma === 'pix' ? 'block' : 'none';
        }

        // Função para copiar chave PIX
        function copyPix() {
            const pixInput = document.querySelector('input[readonly]');
            pixInput.select();
            document.execCommand('copy');
            alert('Chave PIX copiada!');
        }

        // Atualizar informações do pacote baseado na URL
        function atualizarPacote() {
            const params = new URLSearchParams(window.location.search);
            const pacote = params.get('pacote');
            const valores = {
                basico: 699,
                profissional: 1499,
                premium: 2499
            };

            if (pacote && valores[pacote]) {
                document.getElementById('pacoteNome').textContent =
                    pacote.charAt(0).toUpperCase() + pacote.slice(1);
                document.getElementById('pacoteValor').textContent = valores[pacote];
            }
        }

        // Executar quando a página carregar
        document.addEventListener('DOMContentLoaded', atualizarPacote);
    </script>
</body>

</html>